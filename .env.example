# ============================================================================
# Toygres Configuration
# ============================================================================

# ----------------------------------------------------------------------------
# Metadata Database (Required for control plane)
# ----------------------------------------------------------------------------
# PostgreSQL connection string for application metadata
# Duroxide will use schema: "toygres-duroxide"
# Application metadata will use schema: "public"
DATABASE_URL=postgresql://user:password@localhost:5432/toygres

# ----------------------------------------------------------------------------
# Control Plane Server Configuration
# ----------------------------------------------------------------------------
SERVER_HOST=0.0.0.0
SERVER_PORT=3000

# ----------------------------------------------------------------------------
# Azure Kubernetes Service Configuration (Required)
# ----------------------------------------------------------------------------
AKS_CLUSTER_NAME=your-aks-cluster
AKS_RESOURCE_GROUP=your-resource-group
AKS_NAMESPACE=toygres

# ----------------------------------------------------------------------------
# DNS Configuration (Optional)
# ----------------------------------------------------------------------------
# Base DNS label for Azure public DNS names
# When set, creates: <instance-name>-<DNS_LABEL>.<region>.cloudapp.azure.com
# Example: DNS_LABEL=toygres creates mydb-toygres.westus3.cloudapp.azure.com
DNS_LABEL=

# ----------------------------------------------------------------------------
# Example/Testing Configuration (Optional)
# ----------------------------------------------------------------------------
# Instance name for test deployments
INSTANCE_NAME=test-pg-1

# PostgreSQL password for test deployments
POSTGRES_PASSWORD=testpass123

# Use LoadBalancer (true) for public IP, or ClusterIP (false) for internal only
USE_LOAD_BALANCER=true

# Inject failure in test_connection activity for testing rollback
# TOYGRES_INJECT_TEST_CONNECTION_FAILURE=yes

# ----------------------------------------------------------------------------
# Logging Configuration (Optional)
# ----------------------------------------------------------------------------
# Log level: trace, debug, info, warn, error
RUST_LOG=toygres_server=info,toygres_orchestrations=info,duroxide=info

# ----------------------------------------------------------------------------
# Azure Authentication
# ----------------------------------------------------------------------------
# The Azure SDK will use DefaultAzureCredential which supports:
# - Environment variables (set these for service principal auth):
#   AZURE_CLIENT_ID=your-client-id
#   AZURE_CLIENT_SECRET=your-client-secret
#   AZURE_TENANT_ID=your-tenant-id
# - Managed Identity (automatic when running in Azure)
# - Azure CLI authentication (use: az login)
